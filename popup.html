<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Price Analyzer</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">

        <!-- User Login Section -->
        <div class="login-section" id="loginSection">
            <h3>üîê Secret Key Login</h3>
            <p>Enter your secret key to access the analyzer</p>
            <input type="password" id="secretKeyInput" placeholder="Enter your secret key" class="login-input">
            <button id="loginBtn" class="login-btn">Login</button>
            <div class="login-info">
                <p><strong>Need a key?</strong> Ask your admin for your secret key</p>
            </div>
        </div>

        <!-- User Info Section (separate from login) -->
        <div class="user-info" id="userInfo" style="display: none;">
            <h3>üë§ User Information</h3>
            <p>Logged in as: <strong id="currentUser"></strong></p>
            <p>Role: <span id="userRole" class="user-role"></span></p>
            <div class="user-actions">
                <a href="analytics_standalone.html" target="_blank" class="analytics-link">üìä Open Analytics Dashboard</a>
                <button id="logoutBtn" class="logout-btn">Logout</button>
            </div>
        </div>

        <!-- Insert Max Binder Button Section -->
        <div class="top-button">
            <span class="star-icon">‚≠ê</span>
            <span class="button-text">Insert Max Binder</span>
        </div>

        <!-- Price Boxes Section -->
        <div class="price-boxes-section">
            <div class="price-box">
                <div class="price-box-header">
                    <span class="price-icon">üí∞</span>
                    <span class="price-title">Deposit</span>
                </div>
                <div class="price-amount" id="depositAmount">$0.00</div>
                <input type="number" class="price-input" id="depositInput" placeholder="Enter deposit amount" min="0" step="0.01">
            </div>

            <div class="price-box">
                <div class="price-box-header">
                    <span class="price-icon">üì¶</span>
                    <span class="price-title">Pickup</span>
                </div>
                <div class="price-amount" id="pickupAmount">$0.00</div>
                <input type="number" class="price-input" id="pickupInput" placeholder="Enter pickup amount" min="0" step="0.01">
            </div>

            <div class="price-box">
                <div class="price-box-header">
                    <span class="price-icon">üöö</span>
                    <span class="price-title">Drop Off</span>
                </div>
                <div class="price-amount" id="dropoffAmount">$0.00</div>
                <input type="number" class="price-input" id="dropoffInput" placeholder="Enter drop off amount" min="0" step="0.01">
            </div>
        </div>
        
        <!-- Payment Processing Section -->
        <div class="payment-section" id="paymentSection" style="display: none;">
            <div class="payment-header">
                <span class="payment-icon">üí≥</span>
                <span class="payment-title">Payment Processing</span>
            </div>
            
            <div class="payment-form">
                <!-- Transaction Amount -->
                <div class="form-group">
                    <label for="paymentAmount">Amount to Charge:</label>
                    <div class="amount-input-container">
                        <span class="currency-symbol">$</span>
                        <input type="number" id="paymentAmount" placeholder="0.00" min="0.01" step="0.01" class="amount-input">
                    </div>
                </div>

                <!-- Card Information -->
                <div class="form-group">
                    <label for="cardNumber">Card Number:</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" class="card-input">
                    <div class="card-type-indicator" id="cardTypeIndicator"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="expDate">Expiration Date:</label>
                        <input type="text" id="expDate" placeholder="MM/YY" maxlength="5" class="exp-input">
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV:</label>
                        <input type="text" id="cvv" placeholder="123" maxlength="4" class="cvv-input">
                    </div>
                </div>

                <!-- Cardholder Information -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="cardFirstName">First Name:</label>
                        <input type="text" id="cardFirstName" placeholder="John" class="name-input">
                    </div>
                    <div class="form-group">
                        <label for="cardLastName">Last Name:</label>
                        <input type="text" id="cardLastName" placeholder="Doe" class="name-input">
                    </div>
                </div>

                <!-- Transaction Type -->
                <div class="form-group">
                    <label for="transactionType">Transaction Type:</label>
                    <select id="transactionType" class="transaction-select">
                        <option value="ccsale">Sale (Authorize & Capture)</option>
                        <option value="ccauthonly">Authorization Only</option>
                    </select>
                </div>

                <!-- Payment Buttons -->
                <div class="payment-buttons">
                    <button id="processPaymentBtn" class="payment-btn primary">
                        <span class="btn-icon">üí≥</span>
                        Process Payment
                    </button>
                    <button id="testPaymentBtn" class="payment-btn secondary">
                        <span class="btn-icon">üß™</span>
                        Test Payment
                    </button>
                </div>

                <!-- Payment Status -->
                <div id="paymentStatus" class="payment-status" style="display: none;">
                    <div class="status-content">
                        <div class="status-icon" id="statusIcon"></div>
                        <div class="status-text">
                            <div class="status-title" id="statusTitle"></div>
                            <div class="status-message" id="statusMessage"></div>
                        </div>
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="recent-transactions" id="recentTransactions" style="display: none;">
                    <h4>Recent Transactions</h4>
                    <div id="transactionList" class="transaction-list"></div>
                </div>
            </div>
        </div>

    </div>

    <!-- Include payment configuration and service -->
    <script src="payment-config.js"></script>
    <script src="payment-service.js"></script>
    <script src="popup.js"></script>
</body>
</html>
